name: Run Spring Boot MySQL End-to-End Tests

on:
  workflow_call:

jobs:
  spring_boot_mysql:
    runs-on: ubuntu-latest
    steps:
      - name: Import setup steps
        uses: ./.github/workflows/end2end/setup.yml

      - name: Start SpringBootMySQL (with and without Zen)
        working-directory: ./sample-apps/SpringBootMySQL
        run: |
          make run
          make runWithoutZen

      - name: Install Python dependencies
        run: python -m pip install -r end2end/requirements.txt

      - name: Run End-to-End tests
        working-directory: ./
        run: sleep 10 && python end2end/spring_boot_mysql.py
